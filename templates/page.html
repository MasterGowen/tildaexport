{% extends "base.html" %}
{% load static %}
{% block content %}

    <div class="ui big breadcrumb">
        <a href="/projects/" class="section">Проекты</a>
        <i class="right chevron icon divider"></i>
        <a href="/projects/{{ page.projectid }}/" class="section">{{ project.title }}</a>
        <i class="right chevron icon divider"></i>
        <div class="active section">{{ page.title }}</div>
    </div>

    <p><a href="update_page/" class="item">Обновить страничку</a></p>

    <p>Название: {{ page.title }}</p>
    <p>Идентификатор: {{ page.id }}</p>
    <p>ИД проекта: {{ page.projectid }}</p>

    {% if page.descr %} <p>Описание: {{ page.descr }}</p> {% endif %}
    {% if page.img %} <p>Картинка: {{ page.img }}</p> {% endif %}
    {% if page.featureimg %} <p>featureimg: {{ page.featureimg }}</p> {% endif %}
    {% if page.alias %} <p>alias: {{ page.alias }}</p> {% endif %}
    {% if page.date %} <p>Дата создания: {{ page.date }}</p> {% endif %}
    {% if page.sort %} <p>Номер очередности в списке страниц: {{ page.sort }}</p> {% endif %}
    {% if page.published %} <p>Адрес страницы: {{ page.published }}</p> {% endif %}
    {% if page.filename %} <p>Имя файла: {{ page.filename }}</p> {% endif %}
    {% if page.iframe %}
        <p>IFrame: </p>
        <div class="ui form">
            <textarea rows="2" class="js-link">{{ page.iframe }}</textarea>
            <a class="ui basic label" style="margin-top: 2px;">
                <i class="copy icon js-copybtn"></i>Копировать в буфер</a>
        </div>
    {% endif %}

    {% if page.last_updated %} <p>Обновлено: {{ page.last_updated }}</p> {% endif %}

    {% if page.page_path %}
        <p>Страница на нашем сервере: <a href="{{ page.page_path }}" target="_blank">{{ page.title }}</a></p>
    {% else %}
        <p>На нашем сервере еще нет данной страницы. Чтобы она там появилась неоходимо нажать кнопку "Обновить
            станицу"</p>
    {% endif %}

        <script>
    var copyEmailBtn = document.querySelector('.js-copybtn');
copyEmailBtn.addEventListener('click', function(event) {
  // Выборка ссылки с электронной почтой
  var emailLink = document.querySelector('.js-link');
  var range = document.createRange();
  range.selectNode(emailLink);
  window.getSelection().addRange(range);

  try {
    // Теперь, когда мы выбрали текст ссылки, выполним команду копирования
    var successful = document.execCommand('copy');
    var msg = successful ? 'successful' : 'unsuccessful';
    console.log('Copy email command was ' + msg);
  } catch(err) {
    console.log('Oops, unable to copy');
  }

  // Снятие выделения - ВНИМАНИЕ: вы должны использовать
  // removeRange(range) когда это возможно
  window.getSelection().removeAllRanges();
});
    </script>

{% endblock %}
